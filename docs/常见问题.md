# 常见问题（FAQ）

## 1. Windows 上 PyAudio 安装失败

- 现象：`pip install pyaudio` 报错缺少 `portaudio.h` 或编译失败
- 解决：使用预编译轮子（whl），确保 Python 版本与架构匹配，例如：`PyAudio‑0.2.14‑cp310‑cp310‑win_amd64.whl`
- 验证：`python -c "import pyaudio; print(pyaudio.__version__)"`

## 2. Qt/图形界面无法启动

- 现象：界面空白或报错缺少 Qt 插件
- 解决：确保安装 `PyQt5` 或 `PySide6`，建议与 `pyqtgraph` 版本匹配；在虚拟环境中重新安装

## 3. 麦克风无输入或设备占用

- 现象：无波形/特征不更新
- 解决：检查系统隐私权限；关闭占用麦克风的其他应用；降低 `CHUNK_SIZE` 并重试

## 4. 实时性差/延迟过高

- 建议：
  - 调整缓冲区：`AUDIO_BUFFER_SIZE` 与 `THREAD_SLEEP_TIME`
  - 降低帧长或提高帧移（权衡精度与延迟）
  - 确认 CPU 占用，避免后台高负载进程

## 5. 指标异常（能量过大或过零率过高）

- 排查：
  - 是否进行了去直流分量（ZCR 前减均值）
  - 阈值是否适配环境噪声（`ENERGY_THRESHOLD`、`ZCR_THRESHOLD`）
  - 输入是否饱和（16bit PCM 的幅度范围为 [-32768, 32767]）

## 6. 测试失败或不稳定

- 执行：`pytest -q`
- 排查：
  - 检查 `Config` 与测试假设是否一致
  - 测试信号的幅度与帧参数设置是否合理

## 7. 依赖冲突或安装缓慢

- 建议：使用虚拟环境并固定版本（参见 `requirements.txt`）
- 可选：国内镜像源加速 `pip` 下载

## 8. 文档与规范

- 约定：Markdown 文档；公式使用 LaTeX（例如 `$E=mc^2$`）
- Python 文件命名：`snake_case`
